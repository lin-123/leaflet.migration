(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"/7QA":function(t,i,s){"use strict";s.r(i);var e,a,r=s("vrbx"),o=s.n(r),n=s("iojd"),h=s("8jQa"),c=s.n(h);(function(t){t["in"]="in",t["out"]="out"})(e||(e={})),function(t){t["circle"]="circle",t["arrow"]="arrow",t["img"]="img"}(a||(a={}));var l=1.5,d=3,v={marker:{radius:[5,10],pulse:!0,textVisible:!0},line:{width:1,order:!0,icon:{type:a.arrow,imgUrl:"",size:20},direction:e.out}},p=12;function u(t,i){var s=t=>t*t;return Math.sqrt(s(t)+s(i))}function g(t,i){var s=0,e=0;return t.forEach((t=>{var a=i(t);void 0===s?(e=a,s=a):(s>a&&(s=a),e<a&&(e=a))})),[s,e]}function m(t){return Object.prototype.toString.call(t).slice(8,-1)}class x{constructor(t){this.canvas=void 0,this.ctx=void 0,this.target=void 0,this.targetCtx=void 0,this.target=t,this.targetCtx=t.getContext("2d"),this.canvas=document.createElement("canvas"),document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d");var i=this.target,s=i.width,e=i.height;Object.assign(this.canvas,{width:s,height:e})}clear(){var t,i=this.target,s=i.width,e=i.height;Object.assign(this.canvas,{width:s,height:e}),null===(t=this.ctx)||void 0===t||t.clearRect(0,0,s,e)}restore(){var t;null===(t=this.targetCtx)||void 0===t||t.drawImage(this.canvas,0,0)}}class w{constructor(t){this.startX=void 0,this.startY=void 0,this.endX=void 0,this.endY=void 0,this.centerX=void 0,this.centerY=void 0,this.startAngle=void 0,this.endAngle=void 0,this.radius=void 0,this.color=void 0,this.lineWidth=1,this.ctx=void 0;var i=t.from,s=t.to,e=t.width,a=t.color,r=void 0===a?"#fff":a,o=t.ctx,h=Object(n["default"])(i,2),c=h[0],d=h[1],v=Object(n["default"])(s,2),p=v[0],g=v[1];this.ctx=o;var m=u(c-p,d-g),x=(c+p)/2,w=(d+g)/2,f=(d-g)*l+x,b=(p-c)*l+w,y=u(m/2,m*l),C=Math.atan2(d-b,c-f),A=Math.atan2(g-b,p-f);this.startX=c,this.startY=d,this.endX=p,this.endY=g,this.centerX=f,this.centerY=b,this.startAngle=C,this.endAngle=A,this.radius=y,this.color=r,this.lineWidth=e||1}draw(t){}}var f=w;class b extends f{constructor(t){super(t),this.font=void 0,this.label=void 0,this.labels=void 0,this.font=t.font,this.label=t.label,this.labels=t.labels,this.draw(t.canvasCtx)}draw(t){if(t&&(Object.assign(t,{lineWidth:this.lineWidth,strokeStyle:this.color}),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,!1),this.label)){var i=Object(n["default"])(this.labels,2),s=i[0],e=i[1];if(Object.assign(t,{font:this.font}),s){var a=this.startX-15,r=this.startY+5;t.fillText(s,a,r)}if(e){var o=this.endX-15,h=this.endY-5;t.fillText(e,o,h)}}}}var y=b,C=[];class A{constructor(t){this.options=void 0,this.scale=1,this.pulse=void 0,this.ring=void 0,this.showPopover=t=>{var i=t.clientX,s=t.clientY,e=this.options,a=e.data,r=e.index,o=e.popover,n=e.ctx,h=n.mapPosi,c=h.top,l=h.left;o.show(i-l,s-c,a,r)},this.hidePopover=()=>{var t=this.options,i=t.data,s=t.index,e=t.popover;e.hide(i,s)},this.options=t,this.initDom()}clear(){var t=this.pulse;C.push(t),t.removeEventListener("mouseover",this.showPopover),t.removeEventListener("mouseout",this.hidePopover),this.options.ctx.container.removeChild(t)}initDom(){C.length>0?(this.pulse=C.pop(),this.ring=this.pulse.children[0]):(this.pulse=document.createElement("div"),this.ring=document.createElement("div"),this.pulse.appendChild(this.ring));var t=this.options,i=t.x,s=t.y,e=t.radius,a=t.data.color,r=this.pulse,o=this.ring;Object.assign(r.style,{position:"absolute",zIndex:"1",borderRadius:"50%",width:"".concat(2*e,"px"),height:"".concat(2*e,"px"),left:"-".concat(e,"px"),top:"-".concat(e,"px"),background:a,transform:"translate(".concat(i,"px, ").concat(s,"px)")}),Object.assign(o.style,{position:"absolute",borderRadius:"50%",width:"".concat(2*e,"px"),height:"".concat(2*e,"px"),left:"".concat(-1,"px"),top:"".concat(-1,"px"),border:"1px solid ".concat(a)}),o.animate([{transform:"scale(1)"},{transform:"scale(2)"}],{duration:1e3,iterations:1/0}),this.options.ctx.container.appendChild(r),r.addEventListener("mouseover",this.showPopover),r.addEventListener("mouseout",this.hidePopover)}draw(){}}A.domCache=[];var k=A;class P{constructor(t){this.options=void 0,this.img=void 0,this.options=t;var i=t.style;if(i.type===a.img){var s=document.createElement("img");s.src=i,s.width=i.size,s.height=i.size,this.img=s}}draw(t,i){var s=this.options,e=s.borderWidth,r=s.borderColor,o=s.color,n=s.style,h=n.size/2,c=i.x,l=i.y,d=i.angle;if(t.translate(c,l),Object.assign(t,{lineWidth:e||0,strokeStyle:r||"#000",fillStyle:o||"#000"}),t.beginPath(),t.rotate(d+Math.PI),n.type===a.circle)t.arc(0,0,h,0,2*Math.PI,!1);else if(n.type===a.arrow)t.moveTo(h,h),t.lineTo(0,-h),t.lineTo(-h,h),t.lineTo(0,h/4),t.lineTo(h,h);else if(n.type===a.img&&this.img){var v=this.img,p=v.width,u=v.height;t.drawImage(this.img,-p/2,-u,p,u)}t.closePath(),t.stroke(),t.fill()}}var O=P;class j extends f{constructor(t){super(t),this.factor=void 0,this.deltaAngle=void 0,this.trailAngle=void 0,this.tailPointsCount=void 0,this.animateBlur=void 0,this.marker=void 0,this.tailPointsCount=10,this.factor=2/this.radius,this.deltaAngle=80/Math.min(this.radius,400)/this.tailPointsCount,this.trailAngle=this.startAngle,Math.abs(this.startAngle-this.endAngle)>Math.PI&&(this.endAngle+=2*Math.PI),this.marker=new O({style:t.marker,color:"rgb(255, 255, 255)",borderWidth:1,borderColor:this.color})}drawArc(t,i,s,e,a){Object.assign(t,{lineWidth:s,strokeStyle:i,shadowColor:i,lineCap:"round"}),t.beginPath(),t.arc(this.centerX,this.centerY,this.radius,e,a,!1),t.closePath(),t.stroke()}draw(t,i){this.endAngle;var s=this.trailAngle,e=this.factor,a=this.color,r=s+e;this.trailAngle=r;var o=5;this.drawArc(t,a,o,s,s),this.isEnd&&!i&&this.restart()}drawMarker(t){t.save(),t.translate(this.centerX,this.centerY),this.marker.draw(t,{x:Math.cos(this.trailAngle)*this.radius,y:Math.sin(this.trailAngle)*this.radius,angle:this.trailAngle}),t.restore()}get isEnd(){return 180*(this.endAngle-this.trailAngle)/Math.PI<.5}restart(){this.trailAngle=this.startAngle}}var E=j;class L{constructor(t){this.replace=void 0,this.onShow=void 0,this.onHide=void 0,this.el=void 0,this.context=void 0,this.el=o.a.DomUtil.create("div","",t.container),Object.assign(this.el.style,{position:"absolute",left:"0",top:"0",display:"none",zIndex:"11"}),this.context=o.a.DomUtil.create("div","",this.el);var i=t.options,s=i.replacePopover,e=i.onShowPopover,a=i.onHidePopover;"Function"===m(s)?this.replace=s:Object.assign(this.context.style,{border:"1px solid grey",background:"rgba(255,255,255,.3)",borderRadius:"5px",padding:"8px 16px"}),this.onShow=e,this.onHide=a}show(t,i,s,e){var a=s.value,r=s.labels,o=this.el,n=this.replace,h=this.onShow;if(n){var c=n(t,i,s,e);o.replaceChild(c,o.children[0])}else this.context.innerText="".concat(r[0]," -> ").concat(r[1],": ").concat(a);h&&"Function"===m(h)&&h(s,e),Object.assign(o.style,{display:"",transform:"translate(".concat(t+p,"px, ").concat(i+p,"px)")})}hide(t,i){var s=this.el,e=this.onHide;e&&"Function"===m(e)&&e(t,i),s.style.display="none"}}var M=L;class S{constructor(t){var i=t.ctx;this.ctx=void 0,this.started=!1,this.playAnimation=!0,this.store={arcs:[],pulses:[],sparks:[]},this.popover=void 0,this.index=0,this.requestAnimationId=0,this.lineCache=void 0,this.sparkCache=void 0,this.ctx=i,this.popover=new M(i),this.lineCache=new x(i.canvas),this.sparkCache=new x(i.canvas)}refresh(){var t=this.ctx,i=t.data,s=t.options,e=Object(n["default"])(s.marker.radius,2),a=e[0],r=e[1],o=s.line.icon;if(i&&0!==i.length){this.clear();var h=g(i,(t=>t.value)),l=this.popover,d=c()(h,[a,r||2*a]),v=new Set;this.drawLines(),i.forEach(((t,i)=>{var s=t.from,e=t.to,r=t.color,n=d(t.value),h=s=>{var e=s.join("_");if(!v.has(e)){v.add(e);var a=new k({x:s[0],y:s[1],radius:n,index:i,data:t,popover:l,ctx:this.ctx});this.store.pulses.push(a)}};h(s),h(e);var c=new E({from:s,to:e,width:a,color:r,marker:o,ctx:this.ctx});this.store.sparks.push(c)})),this.index=0,this.start()}}clear(){this.store.pulses.forEach((t=>t.clear())),this.store={arcs:[],pulses:[],sparks:[]},this.playAnimation=!0,this.started=!1,window.cancelAnimationFrame(this.requestAnimationId)}draw(t){var i=this.ctx.canvasCtx;t.forEach((t=>t.draw(i)));for(var s=0,e=t.length;s<e;s++)t[s].draw(i)}drawLines(){var t=this.ctx,i=t.data,s=t.options,e=s.marker.textVisible,a=s.line.width,r=this.lineCache.ctx;this.lineCache.clear(),this.sparkCache.clear(),i.map((t=>{null===r||void 0===r||r.beginPath();var i=t.from,s=t.to,o=t.labels,n=t.color;new y({from:i,to:s,labels:o,label:e,width:a,color:n,canvasCtx:r}),null===r||void 0===r||r.stroke()})),this.lineCache.restore()}restoreLines(){this.lineCache.restore()}drawSpark(){var t=this.ctx.options.line.order,i=this.sparkCache.ctx;if(i){i.save(),i.fillStyle="rgba(0, 0, 0, 0.9)",i.globalCompositeOperation="destination-in";var s=this.ctx.canvas,e=s.width,a=s.height;i.fillRect(0,0,e,a),i.restore();var r=this.store.sparks;if(t){var o=r[this.index];o.draw(i,t),o.isEnd&&(o.restart(),this.index<r.length-1?this.index+=1:this.index=0)}else r.forEach((t=>t.draw(i)));this.sparkCache.restore()}}drawSparkMarkers(){this.store.sparks.forEach((t=>{t.drawMarker(this.ctx.canvasCtx)}))}start(){var t=this.started,i=this.store,s=this.ctx,e=s.canvasCtx,a=(s.options.line.order,s.canvas),r=a.width,o=a.height;if(!t){this.draw(i.pulses);var n=()=>{this.requestAnimationId=window.requestAnimationFrame(n),this.playAnimation&&e&&(e.clearRect(0,0,r,o),this.restoreLines(),this.drawSpark(),this.drawSparkMarkers())};n(),this.started=!0}}play(){this.playAnimation=!0}pause(){this.playAnimation=!1}}var _=S,D=s("G3cz"),z=s("J9RX"),X=s("5Yrg"),Y=s.n(X),I=["from","to"];class T{constructor(t){var i=t.container,s=t.canvas,e=t.data,a=t.options,r=t.map;this.options=v,this.data=[],this.map=void 0,this.container=void 0,this.canvas=void 0,this.canvasCtx=void 0,this.mapPosi=void 0,this.container=i,this.canvas=s,this.canvasCtx=s.getContext("2d"),this.map=r,this.data=this._convertData(e),this.setOptions(a),this.mapPosi=this.container.getBoundingClientRect(),window.addEventListener("scroll",(()=>{this.mapPosi=this.container.getBoundingClientRect()}))}setOptions(t){this.options=Y()(this.options,t)}setData(t){this.data=this._convertData(t)}_convertData(t){var i=this.map;if(!i||!Array.isArray(t))return[];var s=i.getBounds();if(s){var e=t=>{var s=Object(n["default"])(t,2),e=s[0],a=s[1],r=i.latLngToContainerPoint(new o.a.LatLng(a,e)),h=r.x,c=r.y;return[h,c]};return t.map((t=>{var i=t.from,s=t.to,a=Object(z["a"])(t,I);return Object(D["a"])({from:e(i),to:e(s)},a)}))}return[]}}class R extends o.a.Layer{constructor(t,i){super(),this._show=!1,this.mapHandles=[],this.migration=void 0,this.options=void 0,this.data=void 0,this.ctx=void 0,this.data=t,this.options=i}onAdd(t){var i=t.getSize(),s=i.x,e=i.y,a=o.a.DomUtil.create("div","leaflet-ODLayer-container"),r=document.createElement("canvas");a.appendChild(r),Object.assign(this,{_show:!0}),Object.assign(a.style,{position:"absolute",width:"".concat(s,"px"),height:"".concat(e,"px")}),t.getPanes().overlayPane.appendChild(a);var n=this.data,h=this.options;return this.ctx=new T({container:a,canvas:r,data:n,options:h,map:t}),this.ctx.map=t,this.migration=new _({ctx:this.ctx}),this._bindMapEvents(),this._draw(),this}onRemove(t){return this.mapHandles.forEach((i=>{var s=i.type,e=i.handle;return t.off(s,e)})),this.mapHandles=[],this.ctx&&o.a.DomUtil.remove(this.ctx.container),this.migration.clear(),this}setData(t){var i;return null===(i=this.ctx)||void 0===i||i.setData(t),this.migration.refresh(),this}setStyle(t){var i;return null===(i=this.ctx)||void 0===i||i.setOptions(t),this.migration.refresh(),this}setVisible(t){return this.ctx?(this.ctx.container.style.display=t?"":"none",this._show=t,this):this}hide(){return this.setVisible(!1)}show(){this.setVisible(!0)}play(){return this.migration.play(),this}pause(){return this.migration.pause(),this}_bindMapEvents(){var t=this.mapHandles,i=t=>{var i=t.target.getZoom();i<d?this.hide():(this._show||this.show(),this.migration.play(),this._draw())};if(this.ctx){var s=this.ctx,e=s.map,a=s.container;e.on("moveend",i),t.push({type:"moveend",handle:i});var r=()=>{a.style.display="none"};e.on("zoomstart ",r),t.push({type:"zoomstart",handle:r});var o=()=>{this._show&&(a.style.display="",this._draw())};e.on("zoomend",o),t.push({type:"zoomend",handle:o})}}_draw(){var t,i,s=null===(t=this.ctx)||void 0===t?void 0:t.map.getBounds();s&&this.migration.playAnimation&&(this._resize(),null===(i=this.ctx)||void 0===i||i.setData(this.data),this.migration.refresh())}_resize(){if(this.ctx){var t=this.ctx,i=t.map,s=t.canvas,e=t.container,a=i.getBounds(),r=a.getNorthWest(),n=i.latLngToContainerPoint(r),h=n.y;e.style.top=h>0?"".concat(-h,"px"):"0px";var c=window.getComputedStyle(i.getContainer());s.setAttribute("width",c.width),s.setAttribute("height",c.height);var l=i.latLngToLayerPoint(r);o.a.DomUtil.setPosition(e,l)}}}o.a.migrationLayer=function(t,i){return new R(t,i)}}}]);